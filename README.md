# GitHubRealmGraphQL

## Neste documento estão alguns pontos de relevância para que se tenha um projeto React-Native contendo Realm trabalhando junto com uma API preparada com o GraphQL. 

 
<p>Para iniciar, é valido trazer o que é uma API, de acordo com o canal-tech “API é um conjunto de rotinas e padrões de programação para acesso a um aplicativo de software ou plataforma baseado na Web. A sigla API refere-se ao termo em inglês ‘Application Programming Interface' que significa em tradução para o português ‘Interface de Programação de Aplicativos’.“ Em outras palavras, uma API é um backend, ou seja, é uma interface entre o código que o usuário irá acessa, normalmente um frontend, e um banco de dados, responsável por entregar e/ou manipular as informações contidas no banco.</p>

<p>	Assim uma API Rest significa, de acordo com astera, “A forma completa da API REST é a Interface de Programação do Aplicativo de Transferência de Estado Representacional, mais comumente conhecida como serviço da web Rest API. Isso significa que quando uma API RESTful é chamada, o servidor irá transferência a representação do recurso solicitado estado para o sistema do cliente.“, ou seja, é uma API que ira retornar um dado apenas quando for realizado um GET, POST, PUT, PATCH ou DELETE, retornando uma estrutura de dados fixa de acordo com os parâmetros da requisição.</p>

<p>Para fechar o assunto de API, o conceito de GraphQL, de acordo com redHat “ GraphQL é uma linguagem de consulta e ambiente de execução voltado a servidores para as interfaces de programação de aplicações (APIs) cuja prioridade é fornecer exatamente os dados que os clientes solicitam e nada mais.  “. Essa configuração foi construída a fim de deixar uma requisição mais flexível e enxuta para os desenvolvedores e assim melhorando o funcionamento das plataformas. Vem com o intuito de substituir a arquitetura REST, fazendo com que o usuário possa escolher os dados que quer receber, quebrando a estrutura fixa de resposta da anterior (REST). Ela também auxilia ao desenvolvedor da própria API, facilitando muito a manutenção da mesma. No GraphQL utiliza-se queries na sua requisição, que são apenas esquemas que descrevem quais dados, em quais ordens de hierarquia, irão ser buscados. Esse recurso também permite que se realize alterações nos bancos utilizando as mutations, que no português se traduz como mutações, que abrangem as ações de criação, atualização e exclusão.</p>

<p>Para esse projeto usa-se a API do GitHub que é equipada com o GraphQL, como o próprio GitHub explica “ O GitHub escolheu o GraphQL para a nossa API v4 porque ele oferece muito mais flexibilidade para os nossos integradores. A capacidade de definir precisamente os dados que você deseja—e apenas os dados que você quer—é uma vantagem poderosa dos pontos de extremidades da API REST v3. O GraphQL permite que você substitua várias solicitações de REST por uma única chamada para buscar os dados que você especificar. “. Assim sendo, mostra-se ser um bom recurso para que se possa apresentar os resultados para o objetivo desejado. A escolha dela, para o projeto, foi devidos aos fatos que: é gratuita, equipada com a tecnologia GraphQL e que pode-se alterar dados e buscá-los nas chamadas da API, sabendo onde exatamente ocorreu a alteração e qual foi ela.</p>

<p>Em alguns casos é necessario passar parametros para as requisições para as chamadas no GraphQL, e esse é um procedimento simples, mesmo que no codigo nao pareça. Nas palavras do GitHub “As Variáveis podem tornar as consultas mais dinâmicas e poderosas, além de reduzir a complexidade ao passar objetos de entrada de mutação.“. Claro que existem diferenças dependendo de qual plataforma esta se usando. Mas um padrão é referenciar o nome e o tipo na query/mutation utilisando o simbolo ‘$', e se quiser dizer que ela é necessaria, basta por, depois o tipo, o simbolo '!'. Assim, dentro do JSON, onde queira-se usar ela, basta colocar o nome precedido do simbolo '$’.</p>

<p>Partindo para o lado do App, usou-se a tecnologia React Native, que em poucas palavras significa, nas palavras do site Organica Digital, “ O React Native é um framework baseado no já aclamado React, desenvolvido pela equipe do Facebook, que possibilita o desenvolvimento de aplicações mobile, tanto para Android, como para iOS, utilizando apenas Javascript.  “ . Em outras palavras, é uma tecnologia que permite que utilize-se da linguagem JavaScript para projetar um App mobile, que serve tanto para Android quanto para IOS (e algumas outras OS) onde tem por objetivo tentar utilizar o máximo dos recursos nativos do dispositivo. Desenvolvido pela empresa Facebook, recebe melhorias e correções constantemente e está cada vez sendo adotados pelos desenvolvedores.</p>


<p>Para o uso offline de dados, é necessário um banco de dados no dispositivo móvel, com base em estudos e pesquisas, foi usado o Realm, que pela iMasters “ A Plataforma Realm Mobile oferece a sincronização automática e contínua de dados em tempo real e gerenciamento de eventos entre o servidor e os dispositivos, suportando o iOS e o Android. “. Sendo assim, é um candidato de banco de dados para dispositivos mobiles, uma vez que é de fácil implementação, fácil uso, rápido, atualizado/melhorado constantemente, sendo para lidar com grandes volumes de dados de todos os tipos e apresentando bons e novos recursos para o desenvolvedor.</p>

 

<p>Como aqui tratará de um projeto em react native, nem tudo é igual à web, e com o graphQL há essa diferença. Para isso, experds no assunto desenvolvera uma biblioteca para realizar essa interface, chamada de Apollo Client. Nas palavras da documentação da mesma “Apollo é uma plataforma para a construção de um gráfico unificado, uma camada de comunicação que ajuda a gerenciar o fluxo de dados entre seus clientes de aplicativos (como web e aplicativos nativos) e seus serviços de back-end. No centro do gráfico está uma linguagem de consulta chamada GraphQL.“ Com esse recurso, é possivel usar hooks (que nas palavras da propria React “Eles permitem que você use o state e outros recursos do React sem escrever uma classe.“) desenvolvidos para esse proposito, que facilita muito a aplicação. Esses hooks são useQuery e useMutation. Exemplos da usabilidade dos memso será dita posteriormente.</p>

 

<p>Com todos os conceitos, previamente comentados, esse APP tem por objetivo de mostrar a interação entre uma API com GraphQL e um banco de dados de um dispositivo móvel por meio de um aplicativo.</p>

<p>Para executar o projeto, precisa-se ter uma emulador mobile no seu computador, clonar o codigo, atraves do terminal/promt de comando, navegue ate o diretorio do projeto, na pasta raiz, execute npm install. Feito isso, na pasta src, crie um arquivo com o nome keyAuthenticator.js em que deve conter o seu PAT TOKEN, que é um token pessoal de desenvolvedor gerado pelo proprio github e o mesmo deve ser exportado com o nome de TOKEN_PAT. E agora é so executá-lo rodando no terminal, no caso de windows: npx react-native run-android, e no caso de linux, precisará de dois terminais, ambos na pasta rais do projeto, um delez ira executar npm start e no outro react-native run-android.</p>

 

<p>Neste projeto, foi criado um repositorio no github, com o nome de repoTeste1 onde tem por objetivo captá-lo com o graphQL e salvar no realm, após isso foi feita uma atualização no repositorio mudando-se o titulo do mesmo para repoTeste12 e, sabendo entao onde e quanto foi feita a mudança na API, foi realizada essa chamada com graphQL e atualizado o dado de forma exata no banco de dados Realm, e nao houve a necessidade de exvluir o objeto na tabela do Realm, apenas atualizar esse atributo do mesmo.</p>

<p>Em relação ao codigo e suas confirgurações, para uma chamada de um query no grapghQL é obrigatoriamente que se respeite o parametro loading, uma vez que se a DOM ou qualquer outro ponto do projeto tentar acessar os paramestros de retorno sem ter finalizado o processo da requisição, na maioria dos casos, irá acarretar em uma quebra do seu aplicativo.</p>

<p>Quando se deseja realizar duas chamadas diferentes, porem lembrando que isso deve ser na mesma API, é necessario que se crie uma nova query com os parametros que se deseja, porem com o nome da mesma diferente da já existente no arquivo; feito isso, instancia-se um novo objeto com o useQuery e atribui-se diferentes nomes aos campos de data, loading, error para que nao haja conflito, e assim é so utiliza-los.</p>

<p>Até agora falou-se apenas de leituras na API usando a tecnologia graphQL, mas é possivel, tambem, realizar alterações/ações nela? A resposta é sim, e isso é possivel graças ao recurso nomeado de mutações (Mutation), que será detalhada na sequencia. Uma mutation no graphQL é a possibilidade de realizar uma certa ação, seguindo este projeto um exemplo seria a criação de repositorios, comentarios, deleção em isssues, pullrequest e assim por diante. De froma breve, de acordo com a propria documentação do GitHub “ O tipo de mutação define operações do GraphQL que alteram dados no servidor. É análogo a executar verbos HTTP como POST, PATCH e DELETE.“  Uma mutation ela tem a estrutura similar a de uma query, variando de acordo com a estrutura necessaria para tal açao, isso deve ser regrado de acordo de como foi feita a mutation no lado da API.</p>
